{% extends 'base_page.html' %}
{% load thinkspace_pages %}

{% block css %}{{ block.super }}
    {#<link media="screen" type="text/css" href="{{ STATIC_URL }}assets/jquery-ui/themes/smoothness/jquery-ui.min.css" rel="stylesheet" />#}
    <link media="screen" type="text/css" href="{{ STATIC_URL }}tsj_gemstone/css/tsj_gemstone.css" rel="stylesheet" />
{% endblock css %}

{% block js %}{{ block.super }}
    <script type="text/javascript" src="{{ STATIC_URL }}assets/jquery-ui/ui/minified/jquery.ui.slider.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}tsj_gemstone/js/jquery.history.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}tsj_gemstone/js/tsj_gemstone.js"></script>
    <script type="text/javascript">
        // Setup some variables that we need
        DIAMOND_LIST_URL = '{% page gemstone-list %}'
        CLARITIES = [
            {% for clarity in clarities %}['{{ clarity.order }}', '{{ clarity.abbr }}']{% if not forloop.last %},
            {% endif %}{% endfor %}
        ];
        GRADINGS = [
            {% for grading in gradings %}['{{ grading.order }}', '{{ grading.name }}']{% if not forloop.last %},
            {% endif %}{% endfor %}
        ];
        CARAT_WEIGHTS = [Math.floor({{ carat_weights.min }}), Math.ceil({{ carat_weights.max }})];
        PRICES = [Math.floor({{ prices.min }}), Math.ceil({{ prices.max }})];
    </script>
{% endblock js %}

{% block bodyclass %}{{ block.super }} gemstone-list{% endblock %}

{% block content %}

<div class="row">
    <div class="gemstone-filters col-md-3">
        <form class="form form-gemstone">
        {% if show_prices == 'anon' or show_prices == 'auth' and user.is_authenticated %}
            <input type="hidden" id="price_min" class="hidden" name="price_min" />
            <input type="hidden" id="price_max" class="hidden" name="price_max" />
        {% endif %}
            <input type="hidden" id="carat_weight_min" class="hidden" name="carat_weight_min" />
            <input type="hidden" id="carat_weight_max" class="hidden" name="carat_weight_max" />
            <input type="hidden" id="color_min" class="hidden" name="color_min" />
            <input type="hidden" id="color_max" class="hidden" name="color_max" />
            <input type="hidden" id="clarity_min" class="hidden" name="clarity_min" />
            <input type="hidden" id="clarity_max" class="hidden" name="clarity_max" />
            <input type="hidden" id="cut_grade_min" class="hidden" name="cut_grade_min" />
            <input type="hidden" id="cut_grade_max" class="hidden" name="cut_grade_max" />
            <input type="hidden" id="polish_min" class="hidden" name="polish_min" />
            <input type="hidden" id="polish_max" class="hidden" name="polish_max" />
            <input type="hidden" id="symmetry_min" class="hidden" name="symmetry_min" />
            <input type="hidden" id="symmetry_max" class="hidden" name="symmetry_max" />
            <div class="filter-primary">
                <div id="tab_cut" class="cut group">
                    <h4>Shape</h4>
                    <ul class="list-unstyled">
                    {% for cut in cuts %}
                        <li class="{{ cut.name|slugify }}">
                            <input id="{{ cut.name|slugify }}" type="checkbox" name="cut" class="hide" value="{{ cut.abbr }}" {% if cut.abbr in initial_cuts %}checked="checked"{% endif %} />
                            <label for="{{ cut.name|slugify }}"><span class="icon"></span>{{ cut.name }}</label>
                        </li>
                    {% endfor %}
                    </ul>
                </div>
            {% if show_prices == 'anon' or show_prices == 'auth' and user.is_authenticated %}
                <div id="tab_price" class="price inputs slider mgr group">
                    <div class="wrapper-price">
                        <input class="price-min-display form-control input-sm" id="price_min_display" />
                        <input class="price-max-display form-control input-sm" id="price_max_display" />
                    </div>
                    <h4>Price</h4>
                    <div id="price_range"></div>
                </div>
            {% endif %}
                <div id="tab_carat_weight" class="carat-weight slider group">
                    <p class="filter-value"><span id="carat_weight_min_display"></span> to <span id="carat_weight_max_display"></span></p>
                    <h4>Carats</h4>
                    <div id="carat_weight_range"></div>
                </div>
                <div id="cut_grade" class="cut-grade slider group">
                    <p class="filter-value"><span id="cut_grade_min_display"></span> to <span id="cut_grade_max_display"></span></p>
                    <h4>Cut</h4>
                    <div id="cut_grade_range"></div>
                </div>
                <div id="tab_color" class="color slider mgr group">
                    <p class="filter-value"><span id="color_min_display"></span> to <span id="color_max_display"></span></p>
                    <h4>Color</h4>                    
                    <div id="color_range"></div>
                </div>
                <div id="tab_clarity" class="clarity slider group">
                    <p class="filter-value"><span id="clarity_min_display"></span> to <span id="clarity_max_display"></span></p>
                    <h4>Clarity</h4>
                    <div id="clarity_range"></div>
                </div>
            </form>
        </div>
        <div class="filter-advanced-toggle">
            <a href="#" class="btn btn-block"><i class="fa fa-angle-double-down"></i> Advanced Options</a>
        </div>
        <div class="filter-advanced hide">
            <form class="form form-gemstone">
                <div id="polish" class="polish slider group">
                    <p class="filter-value"><span id="polish_min_display"></span> to <span id="polish_max_display"></span></p>
                    <h4>Polish</h4>
                    <div id="polish_range"></div>
                </div>
                <div id="symmmetry" class="symmetry slider group">
                    <p class="filter-value"><span id="symmetry_min_display"></span> to <span id="symmetry_max_display"></span></p>
                    <h4>Symmetry</h4>
                    <div id="symmetry_range"></div>
                </div>
                <div id="certifier">
                    <h4>Certifiers</h4>
                    {% for certifier in certifiers %}
                    <label>
                        <input type="checkbox" name="certifier" value="{{ certifier.abbr }}">
                        {{ certifier.name }}
                    </label>
                    {% endfor %}
                </div>
            </form>
        </div>
    </div>
    <div class="gemstone-results col-md-9">
        <div class="table-wrapper row">
            {% include "tsj_gemstone/includes/list_partial.html" %}
        </div>
        <div class="pagination-wrapper row">
            {% include "tsj_gemstone/includes/paginator_full_partial.html" %}
        </div>
    </div>
</div>

{% endblock content %}

